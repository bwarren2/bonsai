<div class="container">
  <h2>Refine</h2>

  {{#if showTimer}}
    {{countdown-timer duration=300 timerDone=(action 'timerDone') task=activeTask}}
  {{/if}}

  <div class="action-area well">
    {{#if activeTask}}
      <div class="task-card well">
        <div class="actions btn-group">
          <button class="btn btn-default" disabled={{showTimer}} {{action 'do' activeTask}} aria-label="do">
            do
          </button>
          <button class="btn btn-default" disabled={{showTimer}} {{action 'defer' activeTask}} aria-label="defer">
            defer
          </button>
          <button class="btn btn-default" disabled={{showTimer}} {{action 'destroy' activeTask}} aria-label="destroy">
            destroy
          </button>
        </div>
        {{activeTask.title}}
        {{textarea value=activeTask.details class="form-control" rows=3 placeholder="Details..." focus-out="saveDetails"}}
      </div>
    {{/if}}
  </div>

  <div class="row messy-stack">
    {{#each inactiveTasks as |task index|}}
      {{#unless task.refined}}
        <div class="task-card well clickable col-md-6 col-md-offset-3" style="z-index: {{math 1000 "-" index}}" {{action "makeActive" task on="click"}}>
          {{task.title}}
        </div>
      {{/unless}}
    {{/each}}
  </div>
</div>
